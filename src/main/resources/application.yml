spring:
  application:
    name: dendrite

  # 1. Database configuration (PostgreSQL + pgvector)
  datasource:
    url: jdbc:postgresql://localhost:5432/dendrite
    username: myuser
    password: secret
    driver-class-name: org.postgresql.Driver
    # HikariCP connection pool (optimized for 2000 concurrent users)
    hikari:
      minimum-idle: 10           # Minimum idle connections
      maximum-pool-size: 30      # Max connections (adjust based on DB capacity)
      idle-timeout: 300000       # 5 minutes
      max-lifetime: 1200000      # 20 minutes
      connection-timeout: 20000  # 20 seconds
      pool-name: DendritePool

  # 2. JPA & Hibernate é…ç½®
  jpa:
    # è‡ªåŠ¨æ›´æ–°è¡¨ç»“æ„ (å¼€å‘é˜¶æ®µç”¨ updateï¼Œç”Ÿäº§ç¯å¢ƒå»ºè®®ç”¨ validate æˆ– none)
    hibernate:
      ddl-auto: update
    show-sql: true # åœ¨æ§åˆ¶å°æ‰“å° SQLï¼Œæ–¹ä¾¿ä½ è§‚å¯Ÿâ€œå›­ä¸â€åœ¨å¹²ä»€ä¹ˆ
    properties:
      hibernate:
        format_sql: true
        # ä½¿ç”¨ PostgreSQL æ–¹è¨€
        dialect: org.hibernate.dialect.PostgreSQLDialect

  # 3. Redis é…ç½® (æ¶ˆæ¯é˜Ÿåˆ—)
  data:
    redis:
      host: localhost
      # âœ… å…³é”®ä¿®æ”¹: è¿™é‡Œå¿…é¡»å¡« 6380ï¼Œå› ä¸ºä½ åœ¨ docker compose é‡Œæ˜ å°„çš„æ˜¯ 6380
      port: 6380
      # å¦‚æœä½ çš„ Redis æ²¡è®¾å¯†ç ï¼Œè¿™é‡Œç•™ç©ºæˆ–æ³¨é‡Šæ‰
      # password:

  # 4. Spring AI é…ç½® (Google Gemini)
  ai:
    google:
      genai:
        # ğŸ”‘ è¿™é‡Œå¡«ä½ çš„ Keyï¼Œæˆ–è€…åœ¨ç¯å¢ƒå˜é‡é‡Œè®¾ç½® GEMINI_API_KEY
        # èŠå¤©æ¨¡å‹é…ç½® (å¤§è„‘)
        chat:
          options:
            # âš ï¸ æˆæœ¬ä¼˜åŒ–ï¼šä½¿ç”¨ Flash æ¨¡å‹ï¼Œæ¯” Pro ä¾¿å®œ 25 å€ï¼
            # gemini-2.5-pro: $1.25/Mè¾“å…¥, $10/Mè¾“å‡º (è¶…è´µ!)
            # gemini-2.0-flash: $0.10/Mè¾“å…¥, $0.40/Mè¾“å‡º (æ¨è!)
            # gemini-1.5-flash: æœ‰å…è´¹å±‚é¢åº¦ (æœ€çœ!)
            model: gemini-2.0-flash
            temperature: 0.3 # 0.3 æ¯”è¾ƒä¸¥è°¨ï¼Œé€‚åˆåšä¿¡æ¯æå–ï¼›0.7 é€‚åˆåˆ›æ„å†™ä½œ

        # å‘é‡æ¨¡å‹é…ç½® (ç¿»è¯‘å®˜)
        embedding:
          options:
            # Google æœ€æ–°çš„åµŒå…¥æ¨¡å‹
            model: text-embedding-004
          project-id: csdmscarter
          location: us-central1
        project-id: csdmscarter
        location:  us-central1

# 5. Server configuration
server:
  tomcat:
    max-threads: 200           # Max worker threads
    min-spare-threads: 20      # Min idle threads
    accept-count: 100          # Queue for incoming connections
    max-connections: 10000     # Max concurrent connections

# 6. Logging configuration
logging:
  level:
    org.springframework.ai: INFO
    org.hibernate.SQL: WARN
    com.carter: INFO
    com.zaxxer.hikari: INFO